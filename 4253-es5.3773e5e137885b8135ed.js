!function(){function t(e,i,n){return(t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(i):o.value}})(e,i,n||e)}function e(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,r=function(){};return{s:r,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,h=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){h=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(h)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var i,n=s(t);if(e){var o=s(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return a(this,i)}}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,i){return e&&l(t.prototype,e),i&&l(t,i),t}(self.webpackChunkphoto_gallery_ng_capacitor=self.webpackChunkphoto_gallery_ng_capacitor||[]).push([[4253],{7922:function(i,o){!function(i){"use strict";var o=function(){function t(e,i){h(this,t),this.state={angle:0,area:[],position:{x:0,y:0},hardAngle:0,hardDrawingAngle:0},this.createdDensity=i,this.nowDrawingDensity=this.createdDensity,this.render=e}return c(t,[{key:"setDensity",value:function(t){this.createdDensity=t,this.nowDrawingDensity=t}},{key:"setDrawingDensity",value:function(t){this.nowDrawingDensity=t}},{key:"setPosition",value:function(t){this.state.position=t}},{key:"setAngle",value:function(t){this.state.angle=t}},{key:"setArea",value:function(t){this.state.area=t}},{key:"setHardDrawingAngle",value:function(t){this.state.hardDrawingAngle=t}},{key:"setHardAngle",value:function(t){this.state.hardAngle=t,this.state.hardDrawingAngle=t}},{key:"setOrientation",value:function(t){this.orientation=t}},{key:"getDrawingDensity",value:function(){return this.nowDrawingDensity}},{key:"getDensity",value:function(){return this.createdDensity}},{key:"getHardAngle",value:function(){return this.state.hardAngle}}]),t}(),a=function(t){n(o,t);var i=r(o);function o(t,e,n){var r;return h(this,o),(r=i.call(this,t,n)).image=null,r.isLoad=!1,r.loadingAngle=0,r.image=new Image,r.image.src=e,r}return c(o,[{key:"draw",value:function(t){var i=this.render.getContext(),n=this.render.convertToGlobal(this.state.position),o=this.render.getRect().pageWidth,r=this.render.getRect().height;i.save(),i.translate(n.x,n.y),i.beginPath();var a,s=e(this.state.area);try{for(s.s();!(a=s.n()).done;){var h=a.value;null!==h&&(h=this.render.convertToGlobal(h),i.lineTo(h.x-n.x,h.y-n.y))}}catch(l){s.e(l)}finally{s.f()}i.rotate(this.state.angle),i.clip(),this.isLoad?i.drawImage(this.image,0,0,o,r):this.drawLoader(i,{x:0,y:0},o,r),i.restore()}},{key:"simpleDraw",value:function(t){var e=this.render.getRect(),i=this.render.getContext(),n=e.pageWidth,o=e.height,r=1===t?e.left+e.pageWidth:e.left,a=e.top;this.isLoad?i.drawImage(this.image,r,a,n,o):this.drawLoader(i,{x:r,y:a},n,o)}},{key:"drawLoader",value:function(t,e,i,n){t.beginPath(),t.strokeStyle="rgb(200, 200, 200)",t.fillStyle="rgb(255, 255, 255)",t.lineWidth=1,t.rect(e.x+1,e.y+1,i-1,n-1),t.stroke(),t.fill();var o={x:e.x+i/2,y:e.y+n/2};t.beginPath(),t.lineWidth=10,t.arc(o.x,o.y,20,this.loadingAngle,3*Math.PI/2+this.loadingAngle),t.stroke(),t.closePath(),this.loadingAngle+=.07,this.loadingAngle>=2*Math.PI&&(this.loadingAngle=0)}},{key:"load",value:function(){var t=this;this.isLoad||(this.image.onload=function(){t.isLoad=!0})}},{key:"newTemporaryCopy",value:function(){return this}},{key:"getTemporaryCopy",value:function(){return this}},{key:"hideTemporaryCopy",value:function(){}}]),o}(o),l=function(){function t(e,i){h(this,t),this.pages=[],this.currentPageIndex=0,this.currentSpreadIndex=0,this.landscapeSpread=[],this.portraitSpread=[],this.render=i,this.app=e,this.currentPageIndex=0,this.isShowCover=this.app.getSettings().showCover}return c(t,[{key:"destroy",value:function(){this.pages=[]}},{key:"createSpread",value:function(){this.landscapeSpread=[],this.portraitSpread=[];for(var t=0;t<this.pages.length;t++)this.portraitSpread.push([t]);var e=0;this.isShowCover&&(this.pages[0].setDensity("hard"),this.landscapeSpread.push([e]),e++);for(var i=e;i<this.pages.length;i+=2)i<this.pages.length-1?this.landscapeSpread.push([i,i+1]):(this.landscapeSpread.push([i]),this.pages[i].setDensity("hard"))}},{key:"getSpread",value:function(){return"landscape"===this.render.getOrientation()?this.landscapeSpread:this.portraitSpread}},{key:"getSpreadIndexByPage",value:function(t){for(var e=this.getSpread(),i=0;i<e.length;i++)if(t===e[i][0]||t===e[i][1])return i;return null}},{key:"getPageCount",value:function(){return this.pages.length}},{key:"getPages",value:function(){return this.pages}},{key:"getPage",value:function(t){if(t>=0&&t<this.pages.length)return this.pages[t];throw new Error("Invalid page number")}},{key:"nextBy",value:function(t){var e=this.pages.indexOf(t);return e<this.pages.length-1?this.pages[e+1]:null}},{key:"prevBy",value:function(t){var e=this.pages.indexOf(t);return e>0?this.pages[e-1]:null}},{key:"getFlippingPage",value:function(t){var e=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===t?this.pages[e].newTemporaryCopy():this.pages[e-1];var i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length||0===t?this.pages[i[0]]:this.pages[i[1]]}},{key:"getBottomPage",value:function(t){var e=this.currentSpreadIndex;if("portrait"===this.render.getOrientation())return 0===t?this.pages[e+1]:this.pages[e-1];var i=0===t?this.getSpread()[e+1]:this.getSpread()[e-1];return 1===i.length?this.pages[i[0]]:0===t?this.pages[i[1]]:this.pages[i[0]]}},{key:"showNext",value:function(){this.currentSpreadIndex<this.getSpread().length&&(this.currentSpreadIndex++,this.showSpread())}},{key:"showPrev",value:function(){this.currentSpreadIndex>0&&(this.currentSpreadIndex--,this.showSpread())}},{key:"getCurrentPageIndex",value:function(){return this.currentPageIndex}},{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===t&&(t=this.currentPageIndex),!(t<0||t>=this.pages.length)){var e=this.getSpreadIndexByPage(t);null!==e&&(this.currentSpreadIndex=e,this.showSpread())}}},{key:"getCurrentSpreadIndex",value:function(){return this.currentSpreadIndex}},{key:"setCurrentSpreadIndex",value:function(t){if(!(t>=0&&t<this.getSpread().length))throw new Error("Invalid page");this.currentSpreadIndex=t}},{key:"showSpread",value:function(){var t=this.getSpread()[this.currentSpreadIndex];2===t.length?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(this.pages[t[1]])):"landscape"===this.render.getOrientation()&&t[0]===this.pages.length-1?(this.render.setLeftPage(this.pages[t[0]]),this.render.setRightPage(null)):(this.render.setLeftPage(null),this.render.setRightPage(this.pages[t[0]])),this.currentPageIndex=t[0],this.app.updatePageIndex(this.currentPageIndex)}}]),t}(),u=function(t){n(o,t);var i=r(o);function o(t,e,n){var r;return h(this,o),(r=i.call(this,t,e)).imagesHref=n,r}return c(o,[{key:"load",value:function(){var t,i=e(this.imagesHref);try{for(i.s();!(t=i.n()).done;){var n=t.value,o=new a(this.render,n,"soft");o.load(),this.pages.push(o)}}catch(r){i.e(r)}finally{i.f()}this.createSpread()}}]),o}(l),g=function(){function t(){h(this,t)}return c(t,null,[{key:"GetDistanceBetweenTwoPoint",value:function(t,e){return null===t||null===e?1/0:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}},{key:"GetSegmentLength",value:function(e){return t.GetDistanceBetweenTwoPoint(e[0],e[1])}},{key:"GetAngleBetweenTwoLine",value:function(t,e){var i=t[0].y-t[1].y,n=e[0].y-e[1].y,o=t[1].x-t[0].x,r=e[1].x-e[0].x;return Math.acos((i*n+o*r)/(Math.sqrt(i*i+o*o)*Math.sqrt(n*n+r*r)))}},{key:"PointInRect",value:function(t,e){return null===e?null:e.x>=t.left&&e.x<=t.width+t.left&&e.y>=t.top&&e.y<=t.top+t.height?e:null}},{key:"GetRotatedPoint",value:function(t,e,i){return{x:t.x*Math.cos(i)+t.y*Math.sin(i)+e.x,y:t.y*Math.cos(i)-t.x*Math.sin(i)+e.y}}},{key:"LimitPointToCircle",value:function(e,i,n){if(t.GetDistanceBetweenTwoPoint(e,n)<=i)return n;var o=e.x,r=e.y,a=n.x,s=n.y,h=Math.sqrt(Math.pow(i,2)*Math.pow(o-a,2)/(Math.pow(o-a,2)+Math.pow(r-s,2)))+o;n.x<0&&(h*=-1);var l=(h-o)*(r-s)/(o-a)+r;return o-a+r===0&&(l=i),{x:h,y:l}}},{key:"GetIntersectBetweenTwoSegment",value:function(e,i,n){return t.PointInRect(e,t.GetIntersectBeetwenTwoLine(i,n))}},{key:"GetIntersectBeetwenTwoLine",value:function(t,e){var i=t[0].y-t[1].y,n=e[0].y-e[1].y,o=t[1].x-t[0].x,r=e[1].x-e[0].x,a=t[0].x*t[1].y-t[1].x*t[0].y,s=e[0].x*e[1].y-e[1].x*e[0].y,h=i*s-n*a,l=o*s-r*a,c=-(a*r-s*o)/(i*r-n*o),u=-(i*s-n*a)/(i*r-n*o);if(isFinite(c)&&isFinite(u))return{x:c,y:u};if(Math.abs(h-l)<.1)throw new Error("Segment included");return null}},{key:"GetCordsFromTwoPoint",value:function(t,e){var i=Math.abs(t.x-e.x),n=Math.abs(t.y-e.y),o=Math.max(i,n),r=[t];function a(t,e,i,n,o){return e>t?t+o*(i/n):e<t?t-o*(i/n):t}for(var s=1;s<=o;s+=1)r.push({x:a(t.x,e.x,i,o,s),y:a(t.y,e.y,n,o,s)});return r}}]),t}(),p=function(i){n(a,i);var o=r(a);function a(t,e,i){var n;return h(this,a),(n=o.call(this,t,i)).copiedElement=null,n.temporaryCopy=null,n.isLoad=!1,n.element=e,n.element.classList.add("stf__item"),n.element.classList.add("--"+i),n}return c(a,[{key:"newTemporaryCopy",value:function(){return"hard"===this.nowDrawingDensity?this:(null===this.temporaryCopy&&(this.copiedElement=this.element.cloneNode(!0),this.element.parentElement.appendChild(this.copiedElement),this.temporaryCopy=new a(this.render,this.copiedElement,this.nowDrawingDensity)),this.getTemporaryCopy())}},{key:"getTemporaryCopy",value:function(){return this.temporaryCopy}},{key:"hideTemporaryCopy",value:function(){null!==this.temporaryCopy&&(this.copiedElement.remove(),this.copiedElement=null,this.temporaryCopy=null)}},{key:"draw",value:function(t){var e=t||this.nowDrawingDensity,i=this.render.convertToGlobal(this.state.position),n=this.render.getRect().pageWidth,o=this.render.getRect().height;this.element.classList.remove("--simple");var r="\n            display: block;\n            z-index: ".concat(this.element.style.zIndex,";\n            left: 0;\n            top: 0;\n            width: ").concat(n,"px;\n            height: ").concat(o,"px;\n        ");"hard"===e?this.drawHard(r):this.drawSoft(i,r)}},{key:"drawHard",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=this.render.getRect().left+this.render.getRect().width/2,i=this.state.hardDrawingAngle,n=t+"\n                backface-visibility: hidden;\n                -webkit-backface-visibility: hidden;\n                clip-path: none;\n                -webkit-clip-path: none;\n            "+(0===this.orientation?"transform-origin: ".concat(this.render.getRect().pageWidth,"px 0; \n                   transform: translate3d(0, 0, 0) rotateY(").concat(i,"deg);"):"transform-origin: 0 0; \n                   transform: translate3d(".concat(e,"px, 0, 0) rotateY(").concat(i,"deg);"));this.element.style.cssText=n}},{key:"drawSoft",value:function(t){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o="polygon( ",r=e(this.state.area);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(null!==a){var s=1===this.render.getDirection()?{x:-a.x+this.state.position.x,y:a.y-this.state.position.y}:{x:a.x-this.state.position.x,y:a.y-this.state.position.y};o+=(s=g.GetRotatedPoint(s,{x:0,y:0},this.state.angle)).x+"px "+s.y+"px, "}}}catch(l){r.e(l)}finally{r.f()}o=o.slice(0,-2);var h=n+"transform-origin: 0 0; clip-path: ".concat(o+=")","; -webkit-clip-path: ").concat(o,";")+(this.render.isSafari()&&0===this.state.angle?"transform: translate(".concat(t.x,"px, ").concat(t.y,"px);"):"transform: translate3d(".concat(t.x,"px, ").concat(t.y,"px, 0) rotate(").concat(this.state.angle,"rad);"));this.element.style.cssText=h}},{key:"simpleDraw",value:function(t){var e=this.render.getRect(),i=e.pageWidth,n=e.height,o=1===t?e.left+e.pageWidth:e.left,r=e.top;this.element.classList.add("--simple"),this.element.style.cssText="\n            position: absolute; \n            display: block; \n            height: ".concat(n,"px; \n            left: ").concat(o,"px; \n            top: ").concat(r,"px; \n            width: ").concat(i,"px; \n            z-index: ").concat(this.render.getSettings().startZIndex+1,";")}},{key:"getElement",value:function(){return this.element}},{key:"load",value:function(){this.isLoad=!0}},{key:"setOrientation",value:function(e){t(s(a.prototype),"setOrientation",this).call(this,e),this.element.classList.remove("--left","--right"),this.element.classList.add(1===e?"--right":"--left")}},{key:"setDrawingDensity",value:function(e){this.element.classList.remove("--soft","--hard"),this.element.classList.add("--"+e),t(s(a.prototype),"setDrawingDensity",this).call(this,e)}}]),a}(o),d=function(t){n(o,t);var i=r(o);function o(t,e,n,r){var a;return h(this,o),(a=i.call(this,t,e)).element=n,a.pagesElement=r,a}return c(o,[{key:"load",value:function(){var t,i=e(this.pagesElement);try{for(i.s();!(t=i.n()).done;){var n=t.value,o=new p(this.render,n,"hard"===n.dataset.density?"hard":"soft");o.load(),this.pages.push(o)}}catch(r){i.e(r)}finally{i.f()}this.createSpread()}}]),o}(l),f=function(){function t(e,i,n,o){h(this,t),this.direction=e,this.corner=i,this.topIntersectPoint=null,this.sideIntersectPoint=null,this.bottomIntersectPoint=null,this.pageWidth=parseInt(n,10),this.pageHeight=parseInt(o,10)}return c(t,[{key:"calc",value:function(t){try{return this.position=this.calcAngleAndPosition(t),this.calculateIntersectPoint(this.position),!0}catch(t){return!1}}},{key:"getFlippingClipArea",value:function(){var t=[],e=!1;return t.push(this.rect.topLeft),t.push(this.topIntersectPoint),null===this.sideIntersectPoint?e=!0:(t.push(this.sideIntersectPoint),null===this.bottomIntersectPoint&&(e=!1)),t.push(this.bottomIntersectPoint),(e||"bottom"===this.corner)&&t.push(this.rect.bottomLeft),t}},{key:"getBottomClipArea",value:function(){var t=[];return t.push(this.topIntersectPoint),"top"===this.corner?t.push({x:this.pageWidth,y:0}):(null!==this.topIntersectPoint&&t.push({x:this.pageWidth,y:0}),t.push({x:this.pageWidth,y:this.pageHeight})),null!==this.sideIntersectPoint?g.GetDistanceBetweenTwoPoint(this.sideIntersectPoint,this.topIntersectPoint)>=10&&t.push(this.sideIntersectPoint):"top"===this.corner&&t.push({x:this.pageWidth,y:this.pageHeight}),t.push(this.bottomIntersectPoint),t.push(this.topIntersectPoint),t}},{key:"getAngle",value:function(){return 0===this.direction?-this.angle:this.angle}},{key:"getRect",value:function(){return this.rect}},{key:"getPosition",value:function(){return this.position}},{key:"getActiveCorner",value:function(){return 0===this.direction?this.rect.topLeft:this.rect.topRight}},{key:"getDirection",value:function(){return this.direction}},{key:"getFlippingProgress",value:function(){return Math.abs((this.position.x-this.pageWidth)/(2*this.pageWidth)*100)}},{key:"getCorner",value:function(){return this.corner}},{key:"getBottomPagePosition",value:function(){return 1===this.direction?{x:this.pageWidth,y:0}:{x:0,y:0}}},{key:"getShadowStartPoint",value:function(){return"top"===this.corner?this.topIntersectPoint:null!==this.sideIntersectPoint?this.sideIntersectPoint:this.topIntersectPoint}},{key:"getShadowAngle",value:function(){var t=g.GetAngleBetweenTwoLine(this.getSegmentToShadowLine(),[{x:0,y:0},{x:this.pageWidth,y:0}]);return 0===this.direction?t:Math.PI-t}},{key:"calcAngleAndPosition",value:function(t){var e=t;if(this.updateAngleAndGeometry(e),e="top"===this.corner?this.checkPositionAtCenterLine(e,{x:0,y:0},{x:0,y:this.pageHeight}):this.checkPositionAtCenterLine(e,{x:0,y:this.pageHeight},{x:0,y:0}),Math.abs(e.x-this.pageWidth)<1&&Math.abs(e.y)<1)throw new Error("Point is too small");return e}},{key:"updateAngleAndGeometry",value:function(t){this.angle=this.calculateAngle(t),this.rect=this.getPageRect(t)}},{key:"calculateAngle",value:function(t){var e=this.pageWidth-t.x+1,i="bottom"===this.corner?this.pageHeight-t.y:t.y,n=2*Math.acos(e/Math.sqrt(i*i+e*e));i<0&&(n=-n);var o=Math.PI-n;if(!isFinite(n)||o>=0&&o<.003)throw new Error("The G point is too small");return"bottom"===this.corner&&(n=-n),n}},{key:"getPageRect",value:function(t){return this.getRectFromBasePoint("top"===this.corner?[{x:0,y:0},{x:this.pageWidth,y:0},{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]:[{x:0,y:-this.pageHeight},{x:this.pageWidth,y:-this.pageHeight},{x:0,y:0},{x:this.pageWidth,y:0}],t)}},{key:"getRectFromBasePoint",value:function(t,e){return{topLeft:this.getRotatedPoint(t[0],e),topRight:this.getRotatedPoint(t[1],e),bottomLeft:this.getRotatedPoint(t[2],e),bottomRight:this.getRotatedPoint(t[3],e)}}},{key:"getRotatedPoint",value:function(t,e){return{x:t.x*Math.cos(this.angle)+t.y*Math.sin(this.angle)+e.x,y:t.y*Math.cos(this.angle)-t.x*Math.sin(this.angle)+e.y}}},{key:"calculateIntersectPoint",value:function(t){var e={left:-1,top:-1,width:this.pageWidth+2,height:this.pageHeight+2};"top"===this.corner?(this.topIntersectPoint=g.GetIntersectBetweenTwoSegment(e,[t,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=g.GetIntersectBetweenTwoSegment(e,[t,this.rect.bottomLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=g.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}])):(this.topIntersectPoint=g.GetIntersectBetweenTwoSegment(e,[this.rect.topLeft,this.rect.topRight],[{x:0,y:0},{x:this.pageWidth,y:0}]),this.sideIntersectPoint=g.GetIntersectBetweenTwoSegment(e,[t,this.rect.topLeft],[{x:this.pageWidth,y:0},{x:this.pageWidth,y:this.pageHeight}]),this.bottomIntersectPoint=g.GetIntersectBetweenTwoSegment(e,[this.rect.bottomLeft,this.rect.bottomRight],[{x:0,y:this.pageHeight},{x:this.pageWidth,y:this.pageHeight}]))}},{key:"checkPositionAtCenterLine",value:function(t,e,i){var n=t,o=g.LimitPointToCircle(e,this.pageWidth,n);n!==o&&(n=o,this.updateAngleAndGeometry(n));var r=Math.sqrt(Math.pow(this.pageWidth,2)+Math.pow(this.pageHeight,2)),a=this.rect.bottomRight,s=this.rect.topLeft;if("bottom"===this.corner&&(a=this.rect.topRight,s=this.rect.bottomLeft),a.x<=0){var h=g.LimitPointToCircle(i,r,s);h!==n&&(n=h,this.updateAngleAndGeometry(n))}return n}},{key:"getSegmentToShadowLine",value:function(){var t=this.getShadowStartPoint();return[t,t!==this.sideIntersectPoint&&null!==this.sideIntersectPoint?this.sideIntersectPoint:this.bottomIntersectPoint]}}]),t}(),y=function(){function t(e,i){h(this,t),this.flippingPage=null,this.bottomPage=null,this.calc=null,this.state="read",this.render=e,this.app=i}return c(t,[{key:"fold",value:function(t){this.setState("user_fold"),null===this.calc&&this.start(t),this.do(this.render.convertToPage(t))}},{key:"flip",value:function(t){if((!this.app.getSettings().disableFlipByClick||this.isPointOnCorners(t))&&(null!==this.calc&&this.render.finishAnimation(),this.start(t))){var e=this.getBoundsRect();this.setState("flipping");var i=e.height/10,n="bottom"===this.calc.getCorner()?e.height-i:i,o="bottom"===this.calc.getCorner()?e.height:0;this.calc.calc({x:e.pageWidth-i,y:n}),this.animateFlippingTo({x:e.pageWidth-i,y:n},{x:-e.pageWidth,y:o},!0)}}},{key:"start",value:function(t){this.reset();var e=this.render.convertToBook(t),i=this.getBoundsRect(),n=this.getDirectionByPoint(e),o=e.y>=i.height/2?"bottom":"top";if(!this.checkDirection(n))return!1;try{if(this.flippingPage=this.app.getPageCollection().getFlippingPage(n),this.bottomPage=this.app.getPageCollection().getBottomPage(n),"landscape"===this.render.getOrientation())if(1===n){var r=this.app.getPageCollection().nextBy(this.flippingPage);null!==r&&this.flippingPage.getDensity()!==r.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),r.setDrawingDensity("hard"))}else{var a=this.app.getPageCollection().prevBy(this.flippingPage);null!==a&&this.flippingPage.getDensity()!==a.getDensity()&&(this.flippingPage.setDrawingDensity("hard"),a.setDrawingDensity("hard"))}return this.render.setDirection(n),this.calc=new f(n,o,i.pageWidth.toString(10),i.height.toString(10)),!0}catch(t){return!1}}},{key:"do",value:function(t){if(null!==this.calc&&this.calc.calc(t)){var e=this.calc.getFlippingProgress();this.bottomPage.setArea(this.calc.getBottomClipArea()),this.bottomPage.setPosition(this.calc.getBottomPagePosition()),this.bottomPage.setAngle(0),this.bottomPage.setHardAngle(0),this.flippingPage.setArea(this.calc.getFlippingClipArea()),this.flippingPage.setPosition(this.calc.getActiveCorner()),this.flippingPage.setAngle(this.calc.getAngle()),0===this.calc.getDirection()?this.flippingPage.setHardAngle(90*(200-2*e)/100):this.flippingPage.setHardAngle(-90*(200-2*e)/100),this.render.setPageRect(this.calc.getRect()),this.render.setBottomPage(this.bottomPage),this.render.setFlippingPage(this.flippingPage),this.render.setShadowData(this.calc.getShadowStartPoint(),this.calc.getShadowAngle(),e,this.calc.getDirection())}}},{key:"flipToPage",value:function(t,e){var i=this.app.getPageCollection().getCurrentSpreadIndex(),n=this.app.getPageCollection().getSpreadIndexByPage(t);try{n>i&&(this.app.getPageCollection().setCurrentSpreadIndex(n-1),this.flipNext(e)),n<i&&(this.app.getPageCollection().setCurrentSpreadIndex(n+1),this.flipPrev(e))}catch(t){}}},{key:"flipNext",value:function(t){this.flip({x:this.render.getRect().left+2*this.render.getRect().pageWidth-10,y:"top"===t?1:this.render.getRect().height-2})}},{key:"flipPrev",value:function(t){this.flip({x:10,y:"top"===t?1:this.render.getRect().height-2})}},{key:"stopMove",value:function(){if(null!==this.calc){var t=this.calc.getPosition(),e=this.getBoundsRect(),i="bottom"===this.calc.getCorner()?e.height:0;t.x<=0?this.animateFlippingTo(t,{x:-e.pageWidth,y:i},!0):this.animateFlippingTo(t,{x:e.pageWidth,y:i},!1)}}},{key:"showCorner",value:function(t){if(this.checkState("read","fold_corner")){var e=this.getBoundsRect(),i=e.pageWidth;if(this.isPointOnCorners(t))if(null===this.calc){if(!this.start(t))return;this.setState("fold_corner"),this.calc.calc({x:i-1,y:1});var n="bottom"===this.calc.getCorner()?e.height-1:1,o="bottom"===this.calc.getCorner()?e.height-50:50;this.animateFlippingTo({x:i-1,y:n},{x:i-50,y:o},!1,!1)}else this.do(this.render.convertToPage(t));else this.setState("read"),this.render.finishAnimation(),this.stopMove()}}},{key:"animateFlippingTo",value:function(t,i,n){var o,r=this,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=g.GetCordsFromTwoPoint(t,i),h=[],l=e(s);try{var c=function(){var t=o.value;h.push(function(){return r.do(t)})};for(l.s();!(o=l.n()).done;)c()}catch(p){l.e(p)}finally{l.f()}var u=this.getAnimationDuration(s.length);this.render.startAnimation(h,u,function(){r.calc&&(n&&(1===r.calc.getDirection()?r.app.turnToPrevPage():r.app.turnToNextPage()),a&&(r.render.setBottomPage(null),r.render.setFlippingPage(null),r.render.clearShadow(),r.setState("read"),r.reset()))})}},{key:"getCalculation",value:function(){return this.calc}},{key:"getState",value:function(){return this.state}},{key:"setState",value:function(t){this.state!==t&&(this.app.updateState(t),this.state=t)}},{key:"getDirectionByPoint",value:function(t){var e=this.getBoundsRect();if("portrait"===this.render.getOrientation()){if(t.x-e.pageWidth<=e.width/5)return 1}else if(t.x<e.width/2)return 1;return 0}},{key:"getAnimationDuration",value:function(t){var e=this.app.getSettings().flippingTime;return t>=1e3?e:t/1e3*e}},{key:"checkDirection",value:function(t){return 0===t?this.app.getCurrentPageIndex()<this.app.getPageCount()-1:this.app.getCurrentPageIndex()>=1}},{key:"reset",value:function(){this.calc=null,this.flippingPage=null,this.bottomPage=null}},{key:"getBoundsRect",value:function(){return this.render.getRect()}},{key:"checkState",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var n=0,o=e;n<o.length;n++){var r=o[n];if(this.state===r)return!0}return!1}},{key:"isPointOnCorners",value:function(t){var e=this.getBoundsRect(),i=Math.sqrt(Math.pow(e.pageWidth,2)+Math.pow(e.height,2))/5,n=this.render.convertToBook(t);return n.x>0&&n.y>0&&n.x<e.width&&n.y<e.height&&(n.x<i||n.x>e.width-i)&&(n.y<i||n.y>e.height-i)}}]),t}(),v=function(){function t(e,i){h(this,t),this.leftPage=null,this.rightPage=null,this.flippingPage=null,this.bottomPage=null,this.direction=null,this.orientation=null,this.shadow=null,this.animation=null,this.pageRect=null,this.boundsRect=null,this.timer=0,this.safari=!1,this.setting=i,this.app=e;var n=new RegExp("Version\\/[\\d\\.]+.*Safari/");this.safari=null!==n.exec(window.navigator.userAgent)}return c(t,[{key:"render",value:function(t){if(null!==this.animation){var e=Math.round((t-this.animation.startedAt)/this.animation.durationFrame);e<this.animation.frames.length?this.animation.frames[e]():(this.animation.onAnimateEnd(),this.animation=null)}this.timer=t,this.drawFrame()}},{key:"start",value:function(){var t=this;this.update();requestAnimationFrame(function e(i){t.render(i),requestAnimationFrame(e)})}},{key:"startAnimation",value:function(t,e,i){this.finishAnimation(),this.animation={frames:t,duration:e,durationFrame:e/t.length,onAnimateEnd:i,startedAt:this.timer}}},{key:"finishAnimation",value:function(){null!==this.animation&&(this.animation.frames[this.animation.frames.length-1](),null!==this.animation.onAnimateEnd&&this.animation.onAnimateEnd()),this.animation=null}},{key:"update",value:function(){this.boundsRect=null;var t=this.calculateBoundsRect();this.orientation!==t&&(this.orientation=t,this.app.updateOrientation(t))}},{key:"calculateBoundsRect",value:function(){var t="landscape",e=this.getBlockWidth(),i=e/2,n=this.getBlockHeight()/2,o=this.setting.width/this.setting.height,r=this.setting.width,a=this.setting.height,s=i-r;return"stretch"===this.setting.size?(e<2*this.setting.minWidth&&this.app.getSettings().usePortrait&&(t="portrait"),(r="portrait"===t?this.getBlockWidth():this.getBlockWidth()/2)>this.setting.maxWidth&&(r=this.setting.maxWidth),(a=r/o)>this.getBlockHeight()&&(r=(a=this.getBlockHeight())*o),s="portrait"===t?i-r/2-r:i-r):e<2*r&&this.app.getSettings().usePortrait&&(t="portrait",s=i-r/2-r),this.boundsRect={left:s,top:n-a/2,width:2*r,height:a,pageWidth:r},t}},{key:"setShadowData",value:function(t,e,i,n){if(this.app.getSettings().drawShadow){var o=100*this.getSettings().maxShadowOpacity;this.shadow={pos:t,angle:e,width:3*this.getRect().pageWidth/4*i/100,opacity:(100-i)*o/100/100,direction:n,progress:2*i}}}},{key:"clearShadow",value:function(){this.shadow=null}},{key:"getBlockWidth",value:function(){return this.app.getUI().getDistElement().offsetWidth}},{key:"getBlockHeight",value:function(){return this.app.getUI().getDistElement().offsetHeight}},{key:"getDirection",value:function(){return this.direction}},{key:"getRect",value:function(){return null===this.boundsRect&&this.calculateBoundsRect(),this.boundsRect}},{key:"getSettings",value:function(){return this.app.getSettings()}},{key:"getOrientation",value:function(){return this.orientation}},{key:"setPageRect",value:function(t){this.pageRect=t}},{key:"setDirection",value:function(t){this.direction=t}},{key:"setRightPage",value:function(t){null!==t&&t.setOrientation(1),this.rightPage=t}},{key:"setLeftPage",value:function(t){null!==t&&t.setOrientation(0),this.leftPage=t}},{key:"setBottomPage",value:function(t){null!==t&&t.setOrientation(1===this.direction?0:1),this.bottomPage=t}},{key:"setFlippingPage",value:function(t){null!==t&&t.setOrientation(0===this.direction&&"portrait"!==this.orientation?0:1),this.flippingPage=t}},{key:"convertToBook",value:function(t){var e=this.getRect();return{x:t.x-e.left,y:t.y-e.top}}},{key:"isSafari",value:function(){return this.safari}},{key:"convertToPage",value:function(t,e){e||(e=this.direction);var i=this.getRect();return{x:0===e?t.x-i.left-i.width/2:i.width/2-t.x+i.left,y:t.y-i.top}}},{key:"convertToGlobal",value:function(t,e){if(e||(e=this.direction),null==t)return null;var i=this.getRect();return{x:0===e?t.x+i.left+i.width/2:i.width/2-t.x+i.left,y:t.y+i.top}}},{key:"convertRectToGlobal",value:function(t,e){return e||(e=this.direction),{topLeft:this.convertToGlobal(t.topLeft,e),topRight:this.convertToGlobal(t.topRight,e),bottomLeft:this.convertToGlobal(t.bottomLeft,e),bottomRight:this.convertToGlobal(t.bottomRight,e)}}}]),t}(),w=function(t){n(i,t);var e=r(i);function i(t,n,o){var r;return h(this,i),(r=e.call(this,t,n)).canvas=o,r.ctx=o.getContext("2d"),r}return c(i,[{key:"getContext",value:function(){return this.ctx}},{key:"reload",value:function(){}},{key:"drawFrame",value:function(){this.clear(),"portrait"!==this.orientation&&null!=this.leftPage&&this.leftPage.simpleDraw(0),null!=this.rightPage&&this.rightPage.simpleDraw(1),null!=this.bottomPage&&this.bottomPage.draw(),this.drawBookShadow(),null!=this.flippingPage&&this.flippingPage.draw(),null!=this.shadow&&(this.drawOuterShadow(),this.drawInnerShadow());var t=this.getRect();"portrait"===this.orientation&&(this.ctx.beginPath(),this.ctx.rect(t.left+t.pageWidth,t.top,t.width,t.height),this.ctx.clip())}},{key:"drawBookShadow",value:function(){var t=this.getRect();this.ctx.save(),this.ctx.beginPath();var e=t.width/20;this.ctx.rect(t.left,t.top,t.width,t.height);var i={x:t.left+t.width/2-e/2,y:0};this.ctx.translate(i.x,i.y);var n=this.ctx.createLinearGradient(0,0,e,0);n.addColorStop(0,"rgba(0, 0, 0, 0)"),n.addColorStop(.4,"rgba(0, 0, 0, 0.2)"),n.addColorStop(.49,"rgba(0, 0, 0, 0.1)"),n.addColorStop(.5,"rgba(0, 0, 0, 0.5)"),n.addColorStop(.51,"rgba(0, 0, 0, 0.4)"),n.addColorStop(1,"rgba(0, 0, 0, 0)"),this.ctx.clip(),this.ctx.fillStyle=n,this.ctx.fillRect(0,0,e,2*t.height),this.ctx.restore()}},{key:"drawOuterShadow",value:function(){var t=this.getRect();this.ctx.save(),this.ctx.beginPath(),this.ctx.rect(t.left,t.top,t.width,t.height);var e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y});this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);var i=this.ctx.createLinearGradient(0,0,this.shadow.width,0);0===this.shadow.direction?(this.ctx.translate(0,-100),i.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),i.addColorStop(1,"rgba(0, 0, 0, 0)")):(this.ctx.translate(-this.shadow.width,-100),i.addColorStop(0,"rgba(0, 0, 0, 0)"),i.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")")),this.ctx.clip(),this.ctx.fillStyle=i,this.ctx.fillRect(0,0,this.shadow.width,2*t.height),this.ctx.restore()}},{key:"drawInnerShadow",value:function(){var t=this.getRect();this.ctx.save(),this.ctx.beginPath();var e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.convertRectToGlobal(this.pageRect);this.ctx.moveTo(i.topLeft.x,i.topLeft.y),this.ctx.lineTo(i.topRight.x,i.topRight.y),this.ctx.lineTo(i.bottomRight.x,i.bottomRight.y),this.ctx.lineTo(i.bottomLeft.x,i.bottomLeft.y),this.ctx.translate(e.x,e.y),this.ctx.rotate(Math.PI+this.shadow.angle+Math.PI/2);var n=3*this.shadow.width/4,o=this.ctx.createLinearGradient(0,0,n,0);0===this.shadow.direction?(this.ctx.translate(-n,-100),o.addColorStop(1,"rgba(0, 0, 0, "+this.shadow.opacity+")"),o.addColorStop(.9,"rgba(0, 0, 0, 0.05)"),o.addColorStop(.7,"rgba(0, 0, 0, "+this.shadow.opacity+")"),o.addColorStop(0,"rgba(0, 0, 0, 0)")):(this.ctx.translate(0,-100),o.addColorStop(0,"rgba(0, 0, 0, "+this.shadow.opacity+")"),o.addColorStop(.1,"rgba(0, 0, 0, 0.05)"),o.addColorStop(.3,"rgba(0, 0, 0, "+this.shadow.opacity+")"),o.addColorStop(1,"rgba(0, 0, 0, 0)")),this.ctx.clip(),this.ctx.fillStyle=o,this.ctx.fillRect(0,0,n,2*t.height),this.ctx.restore()}},{key:"clear",value:function(){this.ctx.fillStyle="white",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}]),i}(v),m=function(){function t(e,i,n){var o=this;h(this,t),this.touchPoint=null,this.swipeTimeout=250,this.onResize=function(){o.update()},this.onMouseDown=function(t){if(o.checkTarget(t.target)){var e=o.getMousePos(t.clientX,t.clientY);o.app.startUserTouch(e),t.preventDefault()}},this.onTouchStart=function(t){if(o.checkTarget(t.target)&&t.changedTouches.length>0){var e=t.changedTouches[0],i=o.getMousePos(e.clientX,e.clientY);o.touchPoint={point:i,time:Date.now()},setTimeout(function(){null!==o.touchPoint&&o.app.startUserTouch(i)},o.swipeTimeout),o.app.getSettings().mobileScrollSupport||t.preventDefault()}},this.onMouseUp=function(t){var e=o.getMousePos(t.clientX,t.clientY);o.app.userStop(e)},this.onMouseMove=function(t){var e=o.getMousePos(t.clientX,t.clientY);o.app.userMove(e,!1)},this.onTouchMove=function(t){if(t.changedTouches.length>0){var e=t.changedTouches[0],i=o.getMousePos(e.clientX,e.clientY);o.app.getSettings().mobileScrollSupport?(null!==o.touchPoint&&(Math.abs(o.touchPoint.point.x-i.x)>10||"read"!==o.app.getState())&&t.cancelable&&o.app.userMove(i,!0),"read"!==o.app.getState()&&t.preventDefault()):o.app.userMove(i,!0)}},this.onTouchEnd=function(t){if(t.changedTouches.length>0){var e=t.changedTouches[0],i=o.getMousePos(e.clientX,e.clientY),n=!1;if(null!==o.touchPoint){var r=i.x-o.touchPoint.point.x,a=Math.abs(i.y-o.touchPoint.point.y);Math.abs(r)>o.swipeDistance&&a<2*o.swipeDistance&&Date.now()-o.touchPoint.time<o.swipeTimeout&&(r>0?o.app.flipPrev(o.touchPoint.point.y<o.app.getRender().getRect().height/2?"top":"bottom"):o.app.flipNext(o.touchPoint.point.y<o.app.getRender().getRect().height/2?"top":"bottom"),n=!0),o.touchPoint=null}o.app.userStop(i,n)}},this.parentElement=e,e.classList.add("stf__parent"),e.insertAdjacentHTML("afterbegin",'<div class="stf__wrapper"></div>'),this.wrapper=e.querySelector(".stf__wrapper"),this.app=i;var r=this.app.getSettings().usePortrait?1:2;e.style.minWidth=n.minWidth*r+"px",e.style.minHeight=n.minHeight+"px","fixed"===n.size&&(e.style.minWidth=n.width*r+"px",e.style.minHeight=n.height+"px"),n.autoSize&&(e.style.width="100%",e.style.maxWidth=2*n.maxWidth+"px"),e.style.display="block",window.addEventListener("resize",this.onResize,!1),this.swipeDistance=n.swipeDistance}return c(t,[{key:"destroy",value:function(){this.app.getSettings().useMouseEvents&&this.removeHandlers(),this.distElement.remove(),this.wrapper.remove()}},{key:"getDistElement",value:function(){return this.distElement}},{key:"getWrapper",value:function(){return this.wrapper}},{key:"setOrientationStyle",value:function(t){this.wrapper.classList.remove("--portrait","--landscape"),"portrait"===t?(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/this.app.getSettings().width*100+"%"),this.wrapper.classList.add("--portrait")):(this.app.getSettings().autoSize&&(this.wrapper.style.paddingBottom=this.app.getSettings().height/(2*this.app.getSettings().width)*100+"%"),this.wrapper.classList.add("--landscape")),this.update()}},{key:"removeHandlers",value:function(){window.removeEventListener("resize",this.onResize),this.distElement.removeEventListener("mousedown",this.onMouseDown),this.distElement.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("touchend",this.onTouchEnd)}},{key:"setHandlers",value:function(){window.addEventListener("resize",this.onResize,!1),this.app.getSettings().useMouseEvents&&(this.distElement.addEventListener("mousedown",this.onMouseDown),this.distElement.addEventListener("touchstart",this.onTouchStart),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("touchmove",this.onTouchMove,{passive:!this.app.getSettings().mobileScrollSupport}),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("touchend",this.onTouchEnd))}},{key:"getMousePos",value:function(t,e){var i=this.distElement.getBoundingClientRect();return{x:t-i.left,y:e-i.top}}},{key:"checkTarget",value:function(t){return!this.app.getSettings().clickEventForward||!["a","button"].includes(t.tagName.toLowerCase())}}]),t}(),x=function(t){n(o,t);var i=r(o);function o(t,n,r,a){var s;h(this,o),(s=i.call(this,t,n,r)).wrapper.insertAdjacentHTML("afterbegin",'<div class="stf__block"></div>'),s.distElement=t.querySelector(".stf__block"),s.items=a;var l,c=e(a);try{for(c.s();!(l=c.n()).done;){var u=l.value;s.distElement.appendChild(u)}}catch(g){c.e(g)}finally{c.f()}return s.setHandlers(),s}return c(o,[{key:"clear",value:function(){var t,i=e(this.items);try{for(i.s();!(t=i.n()).done;){var n=t.value;this.parentElement.appendChild(n)}}catch(o){i.e(o)}finally{i.f()}}},{key:"updateItems",value:function(t){this.removeHandlers(),this.distElement.innerHTML="";var i,n=e(t);try{for(n.s();!(i=n.n()).done;){var o=i.value;this.distElement.appendChild(o)}}catch(r){n.e(r)}finally{n.f()}this.items=t,this.setHandlers()}},{key:"update",value:function(){this.app.getRender().update()}}]),o}(m),P=function(t){n(i,t);var e=r(i);function i(t,n,o){var r;return h(this,i),(r=e.call(this,t,n,o)).wrapper.innerHTML='<canvas class="stf__canvas"></canvas>',r.canvas=t.querySelectorAll("canvas")[0],r.distElement=r.canvas,r.resizeCanvas(),r.setHandlers(),r}return c(i,[{key:"resizeCanvas",value:function(){var t=getComputedStyle(this.canvas),e=parseInt(t.getPropertyValue("width"),10),i=parseInt(t.getPropertyValue("height"),10);this.canvas.width=e,this.canvas.height=i}},{key:"getCanvas",value:function(){return this.canvas}},{key:"update",value:function(){this.resizeCanvas(),this.app.getRender().update()}}]),i}(m),k=function(i){n(a,i);var o=r(a);function a(t,e,i){var n;return h(this,a),(n=o.call(this,t,e)).outerShadow=null,n.innerShadow=null,n.hardShadow=null,n.hardInnerShadow=null,n.element=i,n.createShadows(),n}return c(a,[{key:"createShadows",value:function(){this.element.insertAdjacentHTML("beforeend",'<div class="stf__outerShadow"></div>\n             <div class="stf__innerShadow"></div>\n             <div class="stf__hardShadow"></div>\n             <div class="stf__hardInnerShadow"></div>'),this.outerShadow=this.element.querySelector(".stf__outerShadow"),this.innerShadow=this.element.querySelector(".stf__innerShadow"),this.hardShadow=this.element.querySelector(".stf__hardShadow"),this.hardInnerShadow=this.element.querySelector(".stf__hardInnerShadow")}},{key:"clearShadow",value:function(){t(s(a.prototype),"clearShadow",this).call(this),this.outerShadow.style.cssText="display: none",this.innerShadow.style.cssText="display: none",this.hardShadow.style.cssText="display: none",this.hardInnerShadow.style.cssText="display: none"}},{key:"reload",value:function(){this.element.querySelector(".stf__outerShadow")||this.createShadows()}},{key:"drawHardInnerShadow",value:function(){var t=this.getRect(),e=this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress,i=2.5*t.pageWidth*(100-e)/100+20;i>t.pageWidth&&(i=t.pageWidth);var n="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+5).toString(10),";\n            width: ").concat(i,"px;\n            height: ").concat(t.height,"px;\n            background: linear-gradient(to right,\n                rgba(0, 0, 0, ").concat(this.shadow.opacity*e/100,") 5%,\n                rgba(0, 0, 0, 0) 100%);\n            left: ").concat(t.left+t.width/2,"px;\n            transform-origin: 0 0;\n        ");n+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0);":"transform: translate3d(0, 0, 0) rotateY(180deg);",this.hardInnerShadow.style.cssText=n}},{key:"drawHardOuterShadow",value:function(){var t=this.getRect(),e=2.5*t.pageWidth*(100-(this.shadow.progress>100?200-this.shadow.progress:this.shadow.progress))/100+20;e>t.pageWidth&&(e=t.pageWidth);var i="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+4).toString(10),";\n            width: ").concat(e,"px;\n            height: ").concat(t.height,"px;\n            background: linear-gradient(to left, rgba(0, 0, 0, ").concat(this.shadow.opacity,") 5%, rgba(0, 0, 0, 0) 100%);\n            left: ").concat(t.left+t.width/2,"px;\n            transform-origin: 0 0;\n        ");i+=0===this.getDirection()&&this.shadow.progress>100||1===this.getDirection()&&this.shadow.progress<=100?"transform: translate3d(0, 0, 0) rotateY(180deg);":"transform: translate3d(0, 0, 0);",this.hardShadow.style.cssText=i}},{key:"drawInnerShadow",value:function(){for(var t=this.getRect(),e=3*this.shadow.width/4,i=0===this.getDirection()?e:0,n=0===this.getDirection()?"to left":"to right",o=this.convertToGlobal(this.shadow.pos),r=this.shadow.angle+3*Math.PI/2,a="polygon( ",s=0,h=[this.pageRect.topLeft,this.pageRect.topRight,this.pageRect.bottomRight,this.pageRect.bottomLeft];s<h.length;s++){var l=h[s],c=1===this.getDirection()?{x:-l.x+this.shadow.pos.x,y:l.y-this.shadow.pos.y}:{x:l.x-this.shadow.pos.x,y:l.y-this.shadow.pos.y};a+=(c=g.GetRotatedPoint(c,{x:i,y:100},r)).x+"px "+c.y+"px, "}a=a.slice(0,-2),a+=")";var u="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+10).toString(10),";\n            width: ").concat(e,"px;\n            height: ").concat(2*t.height,"px;\n            background: linear-gradient(").concat(n,",\n                rgba(0, 0, 0, ").concat(this.shadow.opacity,") 5%,\n                rgba(0, 0, 0, 0.05) 15%,\n                rgba(0, 0, 0, ").concat(this.shadow.opacity,") 35%,\n                rgba(0, 0, 0, 0) 100%);\n            transform-origin: ").concat(i,"px 100px;\n            transform: translate3d(").concat(o.x-i,"px, ").concat(o.y-100,"px, 0) rotate(").concat(r,"rad);\n            clip-path: ").concat(a,";\n            -webkit-clip-path: ").concat(a,";\n        ");this.innerShadow.style.cssText=u}},{key:"drawOuterShadow",value:function(){for(var t=this.getRect(),e=this.convertToGlobal({x:this.shadow.pos.x,y:this.shadow.pos.y}),i=this.shadow.angle+3*Math.PI/2,n=1===this.getDirection()?this.shadow.width:0,o=0===this.getDirection()?"to right":"to left",r="polygon( ",a=0,s=[{x:0,y:0},{x:t.pageWidth,y:0},{x:t.pageWidth,y:t.height},{x:0,y:t.height}];a<s.length;a++){var h=s[a];if(null!==h){var l=1===this.getDirection()?{x:-h.x+this.shadow.pos.x,y:h.y-this.shadow.pos.y}:{x:h.x-this.shadow.pos.x,y:h.y-this.shadow.pos.y};r+=(l=g.GetRotatedPoint(l,{x:n,y:100},i)).x+"px "+l.y+"px, "}}r=r.slice(0,-2),r+=")";var c="\n            display: block;\n            z-index: ".concat((this.getSettings().startZIndex+10).toString(10),";\n            width: ").concat(this.shadow.width,"px;\n            height: ").concat(2*t.height,"px;\n            background: linear-gradient(").concat(o,", rgba(0, 0, 0, ").concat(this.shadow.opacity,"), rgba(0, 0, 0, 0));\n            transform-origin: ").concat(n,"px 100px;\n            transform: translate3d(").concat(e.x-n,"px, ").concat(e.y-100,"px, 0) rotate(").concat(i,"rad);\n            clip-path: ").concat(r,";\n            -webkit-clip-path: ").concat(r,";\n        ");this.outerShadow.style.cssText=c}},{key:"drawLeftPage",value:function(){"portrait"!==this.orientation&&null!==this.leftPage&&(1===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()?(this.leftPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.leftPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.leftPage.draw(this.flippingPage.getDrawingDensity())):this.leftPage.simpleDraw(0))}},{key:"drawRightPage",value:function(){null!==this.rightPage&&(0===this.direction&&null!==this.flippingPage&&"hard"===this.flippingPage.getDrawingDensity()?(this.rightPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.rightPage.setHardDrawingAngle(180+this.flippingPage.getHardAngle()),this.rightPage.draw(this.flippingPage.getDrawingDensity())):this.rightPage.simpleDraw(1))}},{key:"drawBottomPage",value:function(){if(null!==this.bottomPage){var t=null!=this.flippingPage?this.flippingPage.getDrawingDensity():null;"portrait"===this.orientation&&1===this.direction||(this.bottomPage.getElement().style.zIndex=(this.getSettings().startZIndex+3).toString(10),this.bottomPage.draw(t))}}},{key:"drawFrame",value:function(){this.clear(),this.drawLeftPage(),this.drawRightPage(),this.drawBottomPage(),null!=this.flippingPage&&(this.flippingPage.getElement().style.zIndex=(this.getSettings().startZIndex+5).toString(10),this.flippingPage.draw()),null!=this.shadow&&null!==this.flippingPage&&("soft"===this.flippingPage.getDrawingDensity()?(this.drawOuterShadow(),this.drawInnerShadow()):(this.drawHardOuterShadow(),this.drawHardInnerShadow()))}},{key:"clear",value:function(){var t,i=e(this.app.getPageCollection().getPages());try{for(i.s();!(t=i.n()).done;){var n=t.value;n!==this.leftPage&&n!==this.rightPage&&n!==this.flippingPage&&n!==this.bottomPage&&(n.getElement().style.cssText="display: none"),n.getTemporaryCopy()!==this.flippingPage&&n.hideTemporaryCopy()}}catch(o){i.e(o)}finally{i.f()}}},{key:"update",value:function(){t(s(a.prototype),"update",this).call(this),null!==this.rightPage&&this.rightPage.setOrientation(1),null!==this.leftPage&&this.leftPage.setOrientation(0)}}]),a}(v),b=function(){function t(){h(this,t),this._default={startPage:0,size:"fixed",width:0,height:0,minWidth:0,maxWidth:0,minHeight:0,maxHeight:0,drawShadow:!0,flippingTime:1e3,usePortrait:!0,startZIndex:0,autoSize:!0,maxShadowOpacity:1,showCover:!1,mobileScrollSupport:!0,swipeDistance:30,clickEventForward:!0,useMouseEvents:!0,showPageCorners:!0,disableFlipByClick:!1}}return c(t,[{key:"getSettings",value:function(t){var e=this._default;if(Object.assign(e,t),"stretch"!==e.size&&"fixed"!==e.size)throw new Error('Invalid size type. Available only "fixed" and "stretch" value');if(e.width<=0||e.height<=0)throw new Error("Invalid width or height");if(e.flippingTime<=0)throw new Error("Invalid flipping time");return"stretch"===e.size?(e.minWidth<=0&&(e.minWidth=100),e.maxWidth<e.minWidth&&(e.maxWidth=2e3),e.minHeight<=0&&(e.minHeight=100),e.maxHeight<e.minHeight&&(e.maxHeight=2e3)):(e.minWidth=e.width,e.maxWidth=e.width,e.minHeight=e.height,e.maxHeight=e.height),e}}]),t}();!function(t,e){void 0===e&&(e={});var i=e.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===i&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}(".stf__parent {\n  position: relative;\n  display: block;\n  box-sizing: border-box;\n  transform: translateZ(0);\n\n  -ms-touch-action: pan-y;\n  touch-action: pan-y;\n}\n\n.sft__wrapper {\n  position: relative;\n  width: 100%;\n  box-sizing: border-box;\n}\n\n.stf__parent canvas {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n}\n\n.stf__block {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  perspective: 2000px;\n}\n\n.stf__item {\n  display: none;\n  position: absolute;\n  transform-style: preserve-3d;\n}\n\n.stf__outerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__innerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}\n\n.stf__hardInnerShadow {\n  position: absolute;\n  left: 0;\n  top: 0;\n}"),i.PageFlip=function(t){n(i,t);var e=r(i);function i(t,n){var o;return h(this,i),(o=e.call(this)).isUserTouch=!1,o.isUserMove=!1,o.setting=null,o.pages=null,o.setting=(new b).getSettings(n),o.block=t,o}return c(i,[{key:"destroy",value:function(){this.ui.destroy(),this.block.remove()}},{key:"update",value:function(){this.render.update(),this.pages.show()}},{key:"loadFromImages",value:function(t){var e=this;this.ui=new P(this.block,this,this.setting);var i=this.ui.getCanvas();this.render=new w(this,this.setting,i),this.flipController=new y(this.render,this),this.pages=new u(this,this.render,t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(function(){e.ui.update(),e.trigger("init",e,{page:e.setting.startPage,mode:e.render.getOrientation()})},1)}},{key:"loadFromHTML",value:function(t){var e=this;this.ui=new x(this.block,this,this.setting,t),this.render=new k(this,this.setting,this.ui.getDistElement()),this.flipController=new y(this.render,this),this.pages=new d(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.render.start(),this.pages.show(this.setting.startPage),setTimeout(function(){e.ui.update(),e.trigger("init",e,{page:e.setting.startPage,mode:e.render.getOrientation()})},1)}},{key:"updateFromImages",value:function(t){var e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new u(this,this.render,t),this.pages.load(),this.pages.show(e),this.trigger("update",this,{page:e,mode:this.render.getOrientation()})}},{key:"updateFromHtml",value:function(t){var e=this.pages.getCurrentPageIndex();this.pages.destroy(),this.pages=new d(this,this.render,this.ui.getDistElement(),t),this.pages.load(),this.ui.updateItems(t),this.render.reload(),this.pages.show(e),this.trigger("update",this,{page:e,mode:this.render.getOrientation()})}},{key:"clear",value:function(){this.pages.destroy(),this.ui.clear()}},{key:"turnToPrevPage",value:function(){this.pages.showPrev()}},{key:"turnToNextPage",value:function(){this.pages.showNext()}},{key:"turnToPage",value:function(t){this.pages.show(t)}},{key:"flipNext",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top";this.flipController.flipNext(t)}},{key:"flipPrev",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"top";this.flipController.flipPrev(t)}},{key:"flip",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top";this.flipController.flipToPage(t,e)}},{key:"updateState",value:function(t){this.trigger("changeState",this,t)}},{key:"updatePageIndex",value:function(t){this.trigger("flip",this,t)}},{key:"updateOrientation",value:function(t){this.ui.setOrientationStyle(t),this.update(),this.trigger("changeOrientation",this,t)}},{key:"getPageCount",value:function(){return this.pages.getPageCount()}},{key:"getCurrentPageIndex",value:function(){return this.pages.getCurrentPageIndex()}},{key:"getPage",value:function(t){return this.pages.getPage(t)}},{key:"getRender",value:function(){return this.render}},{key:"getFlipController",value:function(){return this.flipController}},{key:"getOrientation",value:function(){return this.render.getOrientation()}},{key:"getBoundsRect",value:function(){return this.render.getRect()}},{key:"getSettings",value:function(){return this.setting}},{key:"getUI",value:function(){return this.ui}},{key:"getState",value:function(){return this.flipController.getState()}},{key:"getPageCollection",value:function(){return this.pages}},{key:"startUserTouch",value:function(t){this.mousePosition=t,this.isUserTouch=!0,this.isUserMove=!1}},{key:"userMove",value:function(t,e){this.isUserTouch||e||!this.setting.showPageCorners?this.isUserTouch&&g.GetDistanceBetweenTwoPoint(this.mousePosition,t)>5&&(this.isUserMove=!0,this.flipController.fold(t)):this.flipController.showCorner(t)}},{key:"userStop",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.isUserTouch&&(this.isUserTouch=!1,e||(this.isUserMove?this.flipController.stopMove():this.flipController.flip(t)))}}]),i}(function(){function t(){h(this,t),this.events=new Map}return c(t,[{key:"on",value:function(t,e){return this.events.has(t)?this.events.get(t).push(e):this.events.set(t,[e]),this}},{key:"off",value:function(t){this.events.delete(t)}},{key:"trigger",value:function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.events.has(t)){var o,r=e(this.events.get(t));try{for(r.s();!(o=r.n()).done;){var a=o.value;a({data:n,object:i})}}catch(s){r.e(s)}finally{r.f()}}}}]),t}()),Object.defineProperty(i,"__esModule",{value:!0})}(o)},4253:function(t,e,i){"use strict";i.r(e),i.d(e,{Tab2PageModule:function(){return F}});var n=i(8809),o=i(4989),r=i(1116),a=i(1462),s=i(7922),l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var g=i(8318),p=i(7254),d={error:"cordova_not_available"},f={error:"plugin_not_installed"};function y(t){if("undefined"!=typeof window&&window.angular){var e=window.document,i=window.angular.element(e.querySelector("[ng-app]")||e.body).injector();if(i)return i.get("$q")(function(e,i){t(e,i)});console.warn("Angular 1 was detected but $q couldn't be retrieved. This is usually when the app is not bootstrapped on the html or body tag. Falling back to native promises which won't trigger an automatic digest when promises resolve.")}return function(){if(Promise)return new Promise(function(e,i){t(e,i)});console.error("No Promise support or polyfill found. To enable Ionic Native support, please add the es6-promise polyfill before this script, or run with a library like Angular or on a recent browser.")}()}function v(t,e,i,n){var o,r;void 0===n&&(n={});var a=y(function(a,s){o=n.destruct?k(t,e,i,n,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a(t)},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s(t)}):k(t,e,i,n,a,s),r=s});return o&&o.error&&(a.catch(function(){}),"function"==typeof r&&r(o.error)),a}function w(t,e,i,n){return void 0===n&&(n={}),y(function(o,r){var a=k(t,e,i,n);a?a.error?r(a.error):a.then&&a.then(o).catch(r):r({error:"unexpected_error"})})}function m(t,e,i,n){return void 0===n&&(n={}),new g.y(function(o){var r;return(r=n.destruct?k(t,e,i,n,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.next(t)},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.error(t)}):k(t,e,i,n,o.next.bind(o),o.error.bind(o)))&&r.error&&(o.error(r.error),o.complete()),function(){try{if(n.clearFunction)return n.clearWithArgs?k(t,n.clearFunction,i,n,o.next.bind(o),o.error.bind(o)):k(t,n.clearFunction,[])}catch(r){console.warn("Unable to clear the previous observable watch for",t.constructor.getPluginName(),e),console.warn(r)}}})}function x(t,e){return e="undefined"!=typeof window&&e?S(window,e):e||("undefined"!=typeof window?window:{}),(0,p.R)(e,t)}function P(t,e,i){var n,o;"string"==typeof t?n=t:(n=t.constructor.getPluginRef(),i=t.constructor.getPluginName(),o=t.constructor.getPluginInstallName());var r=b(n);return!(!r||e&&void 0===r[e])||("undefined"!=typeof window&&window.cordova?(function(t,e,i){i?console.warn("Native: tried calling "+t+"."+i+", but the "+t+" plugin is not installed."):console.warn("Native: tried accessing the "+t+" plugin but it's not installed."),e&&console.warn("Install the "+t+" plugin: 'ionic cordova plugin add "+e+"'")}(i,o,e),f):(function(t,e){"undefined"==typeof process&&(e?console.warn("Native: tried calling "+t+"."+e+", but Cordova is not available. Make sure to include cordova.js or run in a device/simulator"):console.warn("Native: tried accessing the "+t+" plugin but Cordova is not available. Make sure to include cordova.js or run in a device/simulator"))}(i,e),d))}function k(t,e,i,n,o,r){void 0===n&&(n={}),i=function(t,e,i,n){if(void 0===e&&(e={}),e.sync)return t;if("reverse"===e.callbackOrder)t.unshift(n),t.unshift(i);else if("node"===e.callbackStyle)t.push(function(t,e){t?n(t):i(e)});else if("object"===e.callbackStyle&&e.successName&&e.errorName){var o={};o[e.successName]=i,o[e.errorName]=n,t.push(o)}else if(void 0!==e.successIndex||void 0!==e.errorIndex){var r=function(){e.successIndex>t.length?t[e.successIndex]=i:t.splice(e.successIndex,0,i)},a=function(){e.errorIndex>t.length?t[e.errorIndex]=n:t.splice(e.errorIndex,0,n)};e.successIndex>e.errorIndex?(a(),r()):(r(),a())}else t.push(i),t.push(n);return t}(i,n,o,r);var a=P(t,e);if(!0===a){var s=b(t.constructor.getPluginRef());return s[e].apply(s,i)}return a}function b(t){return"undefined"!=typeof window?S(window,t):null}function S(t,e){for(var i=e.split("."),n=t,o=0;o<i.length;o++){if(!n)return null;n=n[i[o]]}return n}var I=function(){function t(){}return t.installed=function(){return!0===P(this.pluginRef)},t.getPlugin=function(){return"undefined"!=typeof window?function(t,e){for(var i=e.split("."),n=t,o=0;o<i.length;o++){if(!n)return null;n=n[i[o]]}return n}(window,this.pluginRef):null},t.getPluginName=function(){return this.pluginName},t.getPluginRef=function(){return this.pluginRef},t.getPluginInstallName=function(){return this.plugin},t.getSupportedPlatforms=function(){return this.platforms},t.pluginName="",t.pluginRef="",t.plugin="",t.repo="",t.platforms=[],t.install="",t}();function T(t,e,i,n){return function(t,e,i){return void 0===i&&(i={}),function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return i.sync?k(t,e,n,i):i.observable?m(t,e,n,i):i.eventObservable&&i.event?x(i.event,i.element):i.otherPromise?w(t,e,n,i):v(t,e,n,i)}}(t,e,i).apply(this,n)}function C(t,e){return!0===P(t,e)?b(t.constructor.getPluginRef())[e]:null}function R(t,e,i){!0===P(t,e)&&(b(t.constructor.getPluginRef())[e]=i)}!function(){if("undefined"==typeof process){var t="undefined"!=typeof window?window:{},e=Date.now(),i=!1;t.document.addEventListener("deviceready",function(){console.log("Ionic Native: deviceready event fired after "+(Date.now()-e)+" ms"),i=!0}),setTimeout(function(){!i&&t.cordova&&console.warn("Ionic Native: deviceready did not fire within 5000ms. This can happen when plugins are in an inconsistent state. Try removing plugins from plugins/ and reinstalling them.")},5e3)}}();var A=i(8619),D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ORIENTATIONS={PORTRAIT_PRIMARY:"portrait-primary",PORTRAIT_SECONDARY:"portrait-secondary",LANDSCAPE_PRIMARY:"landscape-primary",LANDSCAPE_SECONDARY:"landscape-secondary",PORTRAIT:"portrait",LANDSCAPE:"landscape",ANY:"any"},e}return u(e,t),e.prototype.onChange=function(){return T(this,"onChange",{eventObservable:!0,event:"orientationchange",element:"window"},arguments)},e.prototype.lock=function(t){return T(this,"lock",{otherPromise:!0},arguments)},e.prototype.unlock=function(){return T(this,"unlock",{sync:!0},arguments)},Object.defineProperty(e.prototype,"type",{get:function(){return C(this,"type")},set:function(t){R(this,"type",t)},enumerable:!1,configurable:!0}),e.pluginName="ScreenOrientation",e.plugin="cordova-plugin-screen-orientation",e.pluginRef="screen.orientation",e.repo="https://github.com/apache/cordova-plugin-screen-orientation",e.platforms=["Android","iOS","Windows"],e.\u0275fac=function(t){return(i||(i=A.n5z(e)))(t||e)},e.\u0275prov=A.Yz7({token:e,factory:function(t){return e.\u0275fac(t)}}),e;var i}(I),M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.overlaysWebView=function(t){return T(this,"overlaysWebView",{sync:!0},arguments)},e.prototype.styleDefault=function(){return T(this,"styleDefault",{sync:!0},arguments)},e.prototype.styleLightContent=function(){return T(this,"styleLightContent",{sync:!0},arguments)},e.prototype.styleBlackTranslucent=function(){return T(this,"styleBlackTranslucent",{sync:!0},arguments)},e.prototype.styleBlackOpaque=function(){return T(this,"styleBlackOpaque",{sync:!0},arguments)},e.prototype.backgroundColorByName=function(t){return T(this,"backgroundColorByName",{sync:!0},arguments)},e.prototype.backgroundColorByHexString=function(t){return T(this,"backgroundColorByHexString",{sync:!0},arguments)},e.prototype.hide=function(){return T(this,"hide",{sync:!0},arguments)},e.prototype.show=function(){return T(this,"show",{sync:!0},arguments)},Object.defineProperty(e.prototype,"isVisible",{get:function(){return C(this,"isVisible")},set:function(t){R(this,"isVisible",t)},enumerable:!1,configurable:!0}),e.pluginName="StatusBar",e.plugin="cordova-plugin-statusbar",e.pluginRef="StatusBar",e.repo="https://github.com/apache/cordova-plugin-statusbar",e.platforms=["Android","iOS","Windows"],e.\u0275fac=function(t){return(i||(i=A.n5z(e)))(t||e)},e.\u0275prov=A.Yz7({token:e,factory:function(t){return e.\u0275fac(t)}}),e;var i}(I),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.preloadSimple=function(t,e){return T(this,"preloadSimple",{},arguments)},e.prototype.preloadComplex=function(t,e,i,n,o){return T(this,"preloadComplex",{},arguments)},e.prototype.play=function(t,e){return T(this,"play",{successIndex:1,errorIndex:2},arguments)},e.prototype.stop=function(t){return T(this,"stop",{},arguments)},e.prototype.loop=function(t){return T(this,"loop",{},arguments)},e.prototype.unload=function(t){return T(this,"unload",{},arguments)},e.prototype.setVolumeForComplexAsset=function(t,e){return T(this,"setVolumeForComplexAsset",{},arguments)},e.pluginName="NativeAudio",e.plugin="cordova-plugin-nativeaudio",e.pluginRef="plugins.NativeAudio",e.repo="https://github.com/floatinghotpot/cordova-plugin-nativeaudio",e.platforms=["Android","Browser","iOS"],e.\u0275fac=function(t){return(i||(i=A.n5z(e)))(t||e)},e.\u0275prov=A.Yz7({token:e,factory:function(t){return e.\u0275fac(t)}}),e;var i}(I);function L(t,e){if(1&t&&A._UZ(0,"div"),2&t){var i=A.oxw().index;A.Tol(i%2?"shadow-right":"shadow-left")}}function O(t,e){if(1&t&&(A.TgZ(0,"div",9),A._UZ(1,"img",10),A.YNc(2,L,1,2,"div",11),A.qZA()),2&t){var i=e.index;A.xp6(1),A.MGl("src","./assets/cirkin_ordek_balasi/cob1/cob-",i-1,".jpg",A.LSH),A.xp6(1),A.Q6J("ngIf",i>1)}}var B,E=function(){return[]},W=function(){var t=function(){function t(e,i,n,o){h(this,t),this.nativeAudio=e,this.platform=i,this.screenOrientation=n,this.statusBar=o,this.canPlay=!0,this.currentPage=0,console.log("almost here")}return c(t,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.backgroundAudio.pause()}},{key:"ngAfterViewInit",value:function(){var t=this;this.platform.is("cordova")?this.platform.ready().then(function(){t.screenOrientation.lock("landscape").then(function(t){},function(t){}).catch(function(t){}),t.startUp()}):this.startUp()}},{key:"startUp",value:function(){var t=this;this.statusBar.hide();var e=this.platform.height();console.log("height:"+e+"  "+window.screen.height);var i=this.platform.width();console.log("width:"+i+"  "+window.screen.width),i<e?i=.8*Math.round(i):i=(i/=2)>e?Math.round(.8*e):Math.round(.8*i),e=i,this.statusBar.hide();var n=document.getElementById("book");this.pageFlip=new s.PageFlip(n,{width:i,height:e}),this.pageFlip.loadFromHTML(document.querySelectorAll(".my-page")),this.pageFlip.on("flip",function(e){t.backgroundAudio.pause(),t.playPage(e.data/2)}),n.style.marginLeft="10vw",n.style.marginTop="4vh",this.playPage(0)}},{key:"onSuccess",value:function(){console.log("success play")}},{key:"onError",value:function(t){console.log("error occurred:"+t)}},{key:"playPage",value:function(t){this.currentPage=t,this.isPlaying()||(this.backgroundAudio=new Audio("./assets/cirkin_ordek_balasi/cob1/sounds/cob-"+t+".mp3"),this.backgroundAudio.onended=function(){console.log("ended")},this.backgroundAudio.play())}},{key:"isPlaying",value:function(){return this.backgroundAudio&&this.backgroundAudio.currentTime>0&&!this.backgroundAudio.paused&&!this.backgroundAudio.ended&&this.backgroundAudio.readyState>2}},{key:"prevPage",value:function(){this.currentPage>0&&(this.pageFlip.flipPrev(),this.playPage(this.currentPage-1))}},{key:"nextPage",value:function(){this.currentPage<26&&(this.pageFlip.flipNext(),this.playPage(this.currentPage+1))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(A.Y36(_),A.Y36(n.t4),A.Y36(D),A.Y36(M))},t.\u0275cmp=A.Xpm({type:t,selectors:[["app-tab2"]],decls:18,vars:2,consts:[["size","12"],["id","book",1,"my-book"],["class","my-page",4,"ngFor","ngForOf"],[1,"ion-text-center"],["size","large",3,"click"],["name","arrow-back","start",""],["size","large"],["name","play","center",""],["name","arrow-forward","end",""],[1,"my-page"],[2,"height","inherit","width","inherit",3,"src"],[3,"class",4,"ngIf"]],template:function(t,e){1&t&&(A.TgZ(0,"ion-content"),A.TgZ(1,"ion-grid"),A.TgZ(2,"ion-row"),A.TgZ(3,"ion-col",0),A.TgZ(4,"div",1),A.YNc(5,O,3,2,"div",2),A.qZA(),A.qZA(),A.TgZ(6,"ion-col",0),A.TgZ(7,"ion-grid"),A.TgZ(8,"ion-row"),A.TgZ(9,"ion-col",3),A.TgZ(10,"ion-button",4),A.NdJ("click",function(){return e.prevPage()}),A._UZ(11,"ion-icon",5),A.qZA(),A.qZA(),A.TgZ(12,"ion-col",3),A.TgZ(13,"ion-button",6),A._UZ(14,"ion-icon",7),A.qZA(),A.qZA(),A.TgZ(15,"ion-col",3),A.TgZ(16,"ion-button",4),A.NdJ("click",function(){return e.nextPage()}),A._UZ(17,"ion-icon",8),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA(),A.qZA()),2&t&&(A.xp6(5),A.Q6J("ngForOf",A.DdM(1,E).constructor(26)))},directives:[n.W2,n.jY,n.Nd,n.wI,r.sg,n.YG,n.gu,r.O5],styles:[".my-book[_ngcontent-%COMP%]{border-width:2px;border-color:red;background-repeat:no-repeat;box-shadow:20px 20px 20px #a9a9a9}p[_ngcontent-%COMP%]{width:auto;text-align:left}.my-page[_ngcontent-%COMP%]{text-align:center;outline:0 solid #ccc;box-shadow:inset -10px 0 10px 0 rgba(0,0,0,.25)}.shadow-right[_ngcontent-%COMP%]{box-shadow:inset 20px 0 20px 0 #000}.shadow-left[_ngcontent-%COMP%], .shadow-right[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;opacity:.6;top:0;left:0}.shadow-left[_ngcontent-%COMP%]{box-shadow:inset -20px 0 20px 0 #000}"]}),t}(),H=i(940),F=((B=function t(){h(this,t)}).\u0275fac=function(t){return new(t||B)},B.\u0275mod=A.oAB({type:B}),B.\u0275inj=A.cJS({providers:[_,M,D],imports:[[n.Pc,r.ez,a.u5,H.e,o.Bz.forChild([{path:"",component:W}])]]}),B)}}])}();